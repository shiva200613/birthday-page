<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Happy birthday saira ü´∂</title>
<style>
  :root{--accent:#ff3f7a;--muted:#6b6b6b}
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;font-family:Arial,Helvetica,sans-serif;
    background:linear-gradient(180deg,#ffe6f0,#fff);
    -webkit-font-smoothing:antialiased;
    transition: background 0.6s ease;
    min-height:100vh;
    display:flex;
    flex-direction:column;
  }

  /* MOON BACKGROUND CLASS ‚Äî applied by JS on the target date */
  .moon-bg{
    background-image: url("https://images.unsplash.com/photo-1470104240373-bc1812eddc9f?auto=format&fit=crop&w=1600&q=80");
    background-size: cover;
    background-position: center;
    background-attachment: fixed;
    color: #fff;
  }
  /* softly dark overlay when moon background active */
  .moon-bg::before{
    content:"";position:fixed;inset:0;background:rgba(0,0,0,0.32);pointer-events:none;
  }

  header{
    background:linear-gradient(90deg,var(--accent),#ff6fa0);
    color:#fff;padding:28px 14px;text-align:center;border-bottom:4px solid rgba(0,0,0,0.04);
  }
  header h1{margin:0;font-size:36px;letter-spacing:0.2px;font-weight:800}
  header p{margin:8px 0 0;font-size:14px;color:rgba(255,255,255,0.95)}

  .actions{display:flex;justify-content:center;gap:10px;padding:14px}
  .actions button{
    border-radius:10px;padding:8px 14px;border:2px solid rgba(255,255,255,0.6);
    background:rgba(255,255,255,0.12);color:#fff;font-weight:700;cursor:pointer;
  }
  .actions button:hover{background:#fff;color:var(--accent)}

  .container{max-width:980px;margin:20px auto;padding:18px;flex:1 0 auto}

  .card{
    background:rgba(255,255,255,0.95);border-radius:14px;padding:18px;box-shadow:0 8px 24px rgba(10,10,10,0.05);
  }

  .album-grid{
    display:grid;grid-template-columns: 1fr 260px;gap:14px;align-items:start;
  }
  .main-photo{
    width:100%;height:480px;border-radius:12px;overflow:hidden;background:#000;display:flex;align-items:center;justify-content:center;
  }
  .main-photo img{width:100%;height:100%;object-fit:cover;display:block;transition:opacity .6s ease,transform .6s ease}
  .main-photo.fade img{opacity:0;transform:scale(.99)}
  .main-photo.show img{opacity:1;transform:scale(1)}

  .side { display:flex;flex-direction:column;gap:10px; }
  .thumb { height:140px;border-radius:10px;overflow:hidden;border:2px solid #f0f0f0;cursor:pointer;background:#000; }
  .thumb img{width:100%;height:100%;object-fit:cover;display:block;transition:transform .3s}
  .thumb:hover img{transform:scale(1.05)}
  .thumb.active{border-color:var(--accent);box-shadow:0 6px 16px rgba(255,80,120,0.12)}

  .controls{display:flex;gap:8px;justify-content:center;margin-top:8px}
  .controls button{flex:1;padding:8px;border-radius:8px;border:0;background:var(--accent);color:#fff;cursor:pointer}

  .dates{margin-top:16px}
  .date-item{background:linear-gradient(90deg,#fff,#fff5fb);border-left:6px solid var(--accent);padding:12px;border-radius:8px;margin-bottom:10px}
  .date-item strong{display:block;font-size:16px}
  .date-item small{color:var(--muted)}

  #diagnostic{margin-top:12px;color:var(--muted);font-size:13px}
  footer{margin-top:14px;text-align:center;color:var(--muted);font-size:13px}

  @media(max-width:880px){
    .album-grid{grid-template-columns:1fr;grid-auto-rows:auto}
    .side{flex-direction:row;gap:8px}
    .thumb{flex:1;height:96px}
    .main-photo{height:320px}
  }
</style>
</head>
<body>

<header>
  <h1>Happy birthday dii fraud</h1>
  <p id="subtext">Open the album ‚Äî photos auto-rotate every 5 seconds. Click a thumbnail to pick a photo.</p>
</header>

<div class="actions" role="navigation" aria-label="Main navigation">
  <button onclick="showSection('home')">Wish Page</button>
  <button onclick="showSection('guest')">Guestbook</button>
</div>

<div class="container">
  <div id="home" class="card">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px">
      <h2 style="margin:0;color:var(--accent)">Our Couple Album üì∏</h2>
      <div style="color:var(--muted)">Click thumbnails or wait ‚Äî auto changes every 5s</div>
    </div>

    <div class="album-grid">
      <div class="main-photo show" id="mainPhotoWrap" aria-live="polite">
        <img id="mainPhoto" src="" alt="Main photo">
      </div>

      <div class="side">
        <div id="thumb1" class="thumb"><img src="" alt="thumb1"></div>
        <div id="thumb2" class="thumb"><img src="" alt="thumb2"></div>
        <div id="thumb3" class="thumb"><img src="" alt="thumb3"></div>

        <div class="controls" style="margin-top:10px">
          <button id="prevBtn" title="Previous">Prev</button>
          <button id="pauseBtn" title="Pause/Resume">Pause</button>
          <button id="nextBtn" title="Next">Next</button>
        </div>
      </div>
    </div>

    <div class="dates">
      <h3 style="color:var(--accent);margin-top:14px">Important Dates üíå</h3>
      <div class="date-item"><strong>Spl Meet üíû</strong><small>2025-05-02</small></div>
      <div class="date-item"><strong>Spl Day üå∏</strong><small>2025-08-10</small></div>
    </div>
  </div>

  <div id="guest" class="card" style="display:none;margin-top:18px">
    <h2 style="margin-top:0;color:var(--accent)">Guestbook ‚Äî Send your wishes</h2>
    <form id="wishForm" style="margin-top:8px">
      <input id="gname" placeholder="Your name (optional)" style="width:100%;padding:10px;border-radius:8px;border:1px solid #eee;margin-bottom:8px">
      <textarea id="gtext" placeholder="Write your wish..." style="width:100%;padding:10px;border-radius:8px;border:1px solid #eee;height:110px"></textarea>
      <div style="text-align:right;margin-top:8px"><button type="submit" style="background:var(--accent);color:#fff;border:0;padding:10px 14px;border-radius:8px;cursor:pointer">Post wish</button></div>
    </form>
    <div id="messages" style="margin-top:14px"></div>
  </div>

  <div id="diagnostic">Diagnostics: No errors yet.</div>
  <footer>Made with ‚ù§Ô∏è by Shiva </footer>
</div>

<script>
(function(){
  // --------- CONFIG: change targetDate here if you want a different date ----------
  // Target date to show moon background (year, monthIndex, day) ‚Äî monthIndex: 0=Jan, 11=Dec
  const targetYear = 2025, targetMonthIndex = 11, targetDay = 6; // 2025-12-06
  // ------------------------------------------------------------------------------

  // if today's date matches the target date, apply moon background
  function applyMoonIfTargetDate(){
    const now = new Date();
    if(now.getFullYear() === targetYear && now.getMonth() === targetMonthIndex && now.getDate() === targetDay){
      document.documentElement.classList.add('moon-bg');
      // update some UI text colors for contrast
      const sub = document.getElementById('subtext');
      if(sub) sub.style.color = 'rgba(255,255,255,0.9)';
      // (optional) small celebration text
      const header = document.querySelector('header');
      const note = document.createElement('div');
      note.style.marginTop = '8px';
      note.style.fontWeight = '700';
      note.style.opacity = '0.95';
      note.textContent = 'üåï Moon night ‚Äî Happy special day! (Background set automatically)';
      header.appendChild(note);
    }
  }

  applyMoonIfTargetDate();

  // ---------- Image / slideshow setup (tries local file names, falls back to online) ----------
  const localNames = ["photo1.jpeg","photo2.jpeg","photo3.jpeg"];
  const fallback = [
    "https://images.unsplash.com/photo-1524504388940-b1c1722653e1?w=1200&q=60&auto=format&fit=crop",
    "https://images.unsplash.com/photo-1517841905240-472988babdf9?w=1200&q=60&auto=format&fit=crop",
    "https://images.unsplash.com/photo-1529626455594-4ff0802cfb7e?w=1200&q=60&auto=format&fit=crop"
  ];

  const mainImg = document.getElementById('mainPhoto');
  const mainWrap = document.getElementById('mainPhotoWrap');
  const diagEl = document.getElementById('diagnostic');

  const thumbs = [
    document.getElementById('thumb1'),
    document.getElementById('thumb2'),
    document.getElementById('thumb3')
  ];

  // test if a URL loads (local or remote)
  function testImage(url, timeout=3000){
    return new Promise(resolve=>{
      const img = new Image();
      let done=false;
      const timer = setTimeout(()=>{ if(!done){ done=true; img.onload=img.onerror=null; resolve(false);} }, timeout);
      img.onload = ()=>{ if(done) return; done=true; clearTimeout(timer); img.onload=img.onerror=null; resolve(true); };
      img.onerror = ()=>{ if(done) return; done=true; clearTimeout(timer); img.onload=img.onerror=null; resolve(false); };
      img.src = url;
    });
  }

  async function findWorkingUrl(index){
    const local = localNames[index];
    if(await testImage(local)) return local;
    // try common variants
    const v1 = local.replace('.jpeg','.jpg'), v2 = local.replace('.jpeg','.png');
    if(await testImage(v1)) return v1;
    if(await testImage(v2)) return v2;
    diagEl.textContent = `Diagnostics: could not load local "${local}" (tried .jpeg/.jpg/.png). Using fallback.`;
    return fallback[index] || fallback[0];
  }

  // ensure each thumb has an <img> child
  thumbs.forEach(t => { if(!t.querySelector('img')) { const i = document.createElement('img'); t.appendChild(i); } });

  const imageUrls = [null,null,null];
  async function initImages(){
    for(let i=0;i<3;i++){
      imageUrls[i] = await findWorkingUrl(i);
      thumbs[i].querySelector('img').src = imageUrls[i];
      thumbs[i].querySelector('img').alt = 'photo'+(i+1);
    }
    showIndex(0, true);
  }

  // slideshow state
  let current = 0, interval = null, paused = false;
  const AUTO_MS = 5000; // 5 seconds
  function setMainSrc(url){
    mainWrap.classList.remove('show'); mainWrap.classList.add('fade');
    setTimeout(()=>{ mainImg.src = url; mainWrap.classList.remove('fade'); mainWrap.classList.add('show'); }, 120);
  }
  function showIndex(i, immediate){
    if(i<0) i=imageUrls.length-1; if(i>=imageUrls.length) i=0;
    current = i;
    setMainSrc(imageUrls[i]);
    thumbs.forEach((t, idx)=> t.classList.toggle('active', idx===i));
    if(!immediate) resetAutoPause();
  }

  function startAuto(){ stopAuto(); interval = setInterval(()=>{ if(!paused) showIndex((current+1)%imageUrls.length, true); }, AUTO_MS); }
  function stopAuto(){ if(interval){ clearInterval(interval); interval=null; } }
  let pauseTimer=null;
  function resetAutoPause(){ paused = true; if(pauseTimer) clearTimeout(pauseTimer); pauseTimer = setTimeout(()=>{ paused = false; }, 10000); }

  document.getElementById('prevBtn').addEventListener('click', ()=> showIndex(current-1,false));
  document.getElementById('nextBtn').addEventListener('click', ()=> showIndex(current+1,false));
  document.getElementById('pauseBtn').addEventListener('click', function(){ paused = !paused; this.textContent = paused ? 'Resume' : 'Pause'; });

  thumbs.forEach((t, idx)=> t.addEventListener('click', ()=> showIndex(idx,false)));

  initImages().then(()=> startAuto()).catch(e=> { diagEl.textContent = 'Diagnostics: initialization error'; console.error(e); });

  // ---------- page navigation (wish/guest) ----------
  function showSection(name){
    document.getElementById('home').style.display = name==='home' ? 'block' : 'none';
    document.getElementById('guest').style.display = name==='guest' ? 'block' : 'none';
    if(location.hash !== (name==='guest' ? '#guest' : '')) location.hash = name==='guest' ? '#guest' : '';
  }
  window.showSection = showSection;
  if(location.hash === '#guest') showSection('guest'); else showSection('home');

  // ---------- guestbook ----------
  const KEY = 'birthday_guestbook_v1';
  const form = document.getElementById('wishForm');
  const messages = document.getElementById('messages');

  function load(){ try { return JSON.parse(localStorage.getItem(KEY) || '[]'); } catch(e){ return []; } }
  function save(a){ try { localStorage.setItem(KEY, JSON.stringify(a)); } catch(e){ diagEl.textContent = 'Diagnostics: save error ' + e.message; } }

  function renderMessages(){
    messages.innerHTML=''; const arr = load();
    if(arr.length===0){ messages.innerHTML = '<div style="color:var(--muted)">No messages yet ‚Äî be the first to wish!</div>'; return; }
    arr.slice().reverse().forEach(m => {
      const d = document.createElement('div');
      d.className = 'date-item';
      d.innerHTML = `<strong>${escapeHtml(m.name||'Anonymous')}</strong><br><small>${new Date(m.time).toLocaleString()}</small><div style="margin-top:6px">${escapeHtml(m.text)}</div>`;
      messages.appendChild(d);
    });
  }
  form && form.addEventListener('submit', function(e){
    e.preventDefault();
    const name = document.getElementById('gname').value.trim() || 'Anonymous';
    const text = document.getElementById('gtext').value.trim();
    if(!text){ alert('Please write a short wish'); return; }
    const arr = load(); arr.push({ name, text, time: new Date().toISOString() }); save(arr); form.reset(); renderMessages();
  });
  renderMessages();

  function escapeHtml(s){ return String(s).replace(/[&<>"']/g, c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c])); }

})();
</script>
</body>
</html>  
